{"version":3,"file":"main.js","sources":["../../../tmp/tsc-output/packages/rrule/src/main.js"],"sourcesContent":["import * as tslib_1 from \"tslib\";\nimport { RRule, rrulestr } from 'rrule';\nimport { refineProps, createDuration, createPlugin } from '@fullcalendar/core';\nvar EVENT_DEF_PROPS = {\n    rrule: null,\n    duration: createDuration\n};\nvar recurring = {\n    parse: function (rawEvent, leftoverProps, dateEnv) {\n        if (rawEvent.rrule != null) {\n            var props = refineProps(rawEvent, EVENT_DEF_PROPS, {}, leftoverProps);\n            var parsed = parseRRule(props.rrule, dateEnv);\n            if (parsed) {\n                return {\n                    typeData: parsed.rrule,\n                    allDayGuess: parsed.allDayGuess,\n                    duration: props.duration\n                };\n            }\n        }\n        return null;\n    },\n    expand: function (rrule, framingRange) {\n        // we WANT an inclusive start and in exclusive end, but the js rrule lib will only do either BOTH\n        // inclusive or BOTH exclusive, which is stupid: https://github.com/jakubroztocil/rrule/issues/84\n        // Workaround: make inclusive, which will generate extra occurences, and then trim.\n        return rrule.between(framingRange.start, framingRange.end, true)\n            .filter(function (date) {\n            return date.valueOf() < framingRange.end.valueOf();\n        });\n    }\n};\nexport default createPlugin({\n    recurringTypes: [recurring]\n});\nfunction parseRRule(input, dateEnv) {\n    var allDayGuess = null;\n    var rrule;\n    if (typeof input === 'string') {\n        rrule = rrulestr(input);\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        var refined = tslib_1.__assign({}, input); // copy\n        if (typeof refined.dtstart === 'string') {\n            var dtstartMeta = dateEnv.createMarkerMeta(refined.dtstart);\n            if (dtstartMeta) {\n                refined.dtstart = dtstartMeta.marker;\n                allDayGuess = dtstartMeta.isTimeUnspecified;\n            }\n            else {\n                delete refined.dtstart;\n            }\n        }\n        if (typeof refined.until === 'string') {\n            refined.until = dateEnv.createMarker(refined.until);\n        }\n        if (refined.freq != null) {\n            refined.freq = convertConstant(refined.freq);\n        }\n        if (refined.wkst != null) {\n            refined.wkst = convertConstant(refined.wkst);\n        }\n        else {\n            refined.wkst = (dateEnv.weekDow - 1 + 7) % 7; // convert Sunday-first to Monday-first\n        }\n        if (refined.byweekday != null) {\n            refined.byweekday = convertConstants(refined.byweekday); // the plural version\n        }\n        rrule = new RRule(refined);\n    }\n    if (rrule) {\n        return { rrule: rrule, allDayGuess: allDayGuess };\n    }\n    return null;\n}\nfunction convertConstants(input) {\n    if (Array.isArray(input)) {\n        return input.map(convertConstant);\n    }\n    return convertConstant(input);\n}\nfunction convertConstant(input) {\n    if (typeof input === 'string') {\n        return RRule[input.toUpperCase()];\n    }\n    return input;\n}\n"],"names":["tslib_1.__assign"],"mappings":"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"}