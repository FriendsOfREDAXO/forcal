{"version":3,"file":"main.js","sources":["../../../tmp/tsc-output/packages/luxon/src/main.js"],"sourcesContent":["import * as tslib_1 from \"tslib\";\nimport { DateTime as LuxonDateTime, Duration as LuxonDuration } from 'luxon';\nimport { Calendar, NamedTimeZoneImpl, createPlugin } from '@fullcalendar/core';\nexport function toDateTime(date, calendar) {\n    if (!(calendar instanceof Calendar)) {\n        throw new Error('must supply a Calendar instance');\n    }\n    return LuxonDateTime.fromJSDate(date, {\n        zone: calendar.dateEnv.timeZone,\n        locale: calendar.dateEnv.locale.codes[0]\n    });\n}\nexport function toDuration(duration, calendar) {\n    if (!(calendar instanceof Calendar)) {\n        throw new Error('must supply a Calendar instance');\n    }\n    return LuxonDuration.fromObject(tslib_1.__assign({}, duration, { locale: calendar.dateEnv.locale.codes[0] }));\n}\nvar LuxonNamedTimeZone = /** @class */ (function (_super) {\n    tslib_1.__extends(LuxonNamedTimeZone, _super);\n    function LuxonNamedTimeZone() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LuxonNamedTimeZone.prototype.offsetForArray = function (a) {\n        return arrayToLuxon(a, this.timeZoneName).offset;\n    };\n    LuxonNamedTimeZone.prototype.timestampToArray = function (ms) {\n        return luxonToArray(LuxonDateTime.fromMillis(ms, {\n            zone: this.timeZoneName\n        }));\n    };\n    return LuxonNamedTimeZone;\n}(NamedTimeZoneImpl));\nfunction formatWithCmdStr(cmdStr, arg) {\n    var cmd = parseCmdStr(cmdStr);\n    if (arg.end) {\n        var start = arrayToLuxon(arg.start.array, arg.timeZone, arg.localeCodes[0]);\n        var end = arrayToLuxon(arg.end.array, arg.timeZone, arg.localeCodes[0]);\n        return formatRange(cmd, start.toFormat.bind(start), end.toFormat.bind(end), arg.separator);\n    }\n    return arrayToLuxon(arg.date.array, arg.timeZone, arg.localeCodes[0]).toFormat(cmd.whole);\n}\nexport default createPlugin({\n    cmdFormatter: formatWithCmdStr,\n    namedTimeZonedImpl: LuxonNamedTimeZone\n});\nfunction luxonToArray(datetime) {\n    return [\n        datetime.year,\n        datetime.month - 1,\n        datetime.day,\n        datetime.hour,\n        datetime.minute,\n        datetime.second,\n        datetime.millisecond\n    ];\n}\nfunction arrayToLuxon(arr, timeZone, locale) {\n    return LuxonDateTime.fromObject({\n        zone: timeZone,\n        locale: locale,\n        year: arr[0],\n        month: arr[1] + 1,\n        day: arr[2],\n        hour: arr[3],\n        minute: arr[4],\n        second: arr[5],\n        millisecond: arr[6]\n    });\n}\nfunction parseCmdStr(cmdStr) {\n    var parts = cmdStr.match(/^(.*?)\\{(.*)\\}(.*)$/); // TODO: lookbehinds for escape characters\n    if (parts) {\n        var middle = parseCmdStr(parts[2]);\n        return {\n            head: parts[1],\n            middle: middle,\n            tail: parts[3],\n            whole: parts[1] + middle.whole + parts[3]\n        };\n    }\n    else {\n        return {\n            head: null,\n            middle: null,\n            tail: null,\n            whole: cmdStr\n        };\n    }\n}\nfunction formatRange(cmd, formatStart, formatEnd, separator) {\n    if (cmd.middle) {\n        var startHead = formatStart(cmd.head);\n        var startMiddle = formatRange(cmd.middle, formatStart, formatEnd, separator);\n        var startTail = formatStart(cmd.tail);\n        var endHead = formatEnd(cmd.head);\n        var endMiddle = formatRange(cmd.middle, formatStart, formatEnd, separator);\n        var endTail = formatEnd(cmd.tail);\n        if (startHead === endHead && startTail === endTail) {\n            return startHead +\n                (startMiddle === endMiddle ? startMiddle : startMiddle + separator + endMiddle) +\n                startTail;\n        }\n    }\n    var startWhole = formatStart(cmd.whole);\n    var endWhole = formatEnd(cmd.whole);\n    if (startWhole === endWhole) {\n        return startWhole;\n    }\n    else {\n        return startWhole + separator + endWhole;\n    }\n}\n"],"names":["LuxonDateTime","LuxonDuration","tslib_1.__assign","tslib_1.__extends"],"mappings":"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"}