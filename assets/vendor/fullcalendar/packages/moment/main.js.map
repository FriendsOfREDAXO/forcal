{"version":3,"file":"main.js","sources":["../../../tmp/tsc-output/packages/moment/src/main.js"],"sourcesContent":["import * as momentNs from 'moment';\nvar moment = momentNs; // the directly callable function\nimport { Calendar, createPlugin } from '@fullcalendar/core';\nexport function toMoment(date, calendar) {\n    if (!(calendar instanceof Calendar)) {\n        throw new Error('must supply a Calendar instance');\n    }\n    return convertToMoment(date, calendar.dateEnv.timeZone, null, calendar.dateEnv.locale.codes[0]);\n}\nexport function toDuration(fcDuration) {\n    return moment.duration(fcDuration); // moment accepts all the props that fc.Duration already has!\n}\nfunction formatWithCmdStr(cmdStr, arg) {\n    var cmd = parseCmdStr(cmdStr);\n    if (arg.end) {\n        var startMom = convertToMoment(arg.start.array, arg.timeZone, arg.start.timeZoneOffset, arg.localeCodes[0]);\n        var endMom = convertToMoment(arg.end.array, arg.timeZone, arg.end.timeZoneOffset, arg.localeCodes[0]);\n        return formatRange(cmd, createMomentFormatFunc(startMom), createMomentFormatFunc(endMom), arg.separator);\n    }\n    return convertToMoment(arg.date.array, arg.timeZone, arg.date.timeZoneOffset, arg.localeCodes[0]).format(cmd.whole); // TODO: test for this\n}\nexport default createPlugin({\n    cmdFormatter: formatWithCmdStr\n});\nfunction createMomentFormatFunc(mom) {\n    return function (cmdStr) {\n        return cmdStr ? mom.format(cmdStr) : ''; // because calling with blank string results in ISO8601 :(\n    };\n}\nfunction convertToMoment(input, timeZone, timeZoneOffset, locale) {\n    var mom;\n    if (timeZone === 'local') {\n        mom = moment(input);\n    }\n    else if (timeZone === 'UTC') {\n        mom = moment.utc(input);\n    }\n    else if (moment.tz) {\n        mom = moment.tz(input, timeZone);\n    }\n    else {\n        mom = moment.utc(input);\n        if (timeZoneOffset != null) {\n            mom.utcOffset(timeZoneOffset);\n        }\n    }\n    mom.locale(locale);\n    return mom;\n}\nfunction parseCmdStr(cmdStr) {\n    var parts = cmdStr.match(/^(.*?)\\{(.*)\\}(.*)$/); // TODO: lookbehinds for escape characters\n    if (parts) {\n        var middle = parseCmdStr(parts[2]);\n        return {\n            head: parts[1],\n            middle: middle,\n            tail: parts[3],\n            whole: parts[1] + middle.whole + parts[3]\n        };\n    }\n    else {\n        return {\n            head: null,\n            middle: null,\n            tail: null,\n            whole: cmdStr\n        };\n    }\n}\nfunction formatRange(cmd, formatStart, formatEnd, separator) {\n    if (cmd.middle) {\n        var startHead = formatStart(cmd.head);\n        var startMiddle = formatRange(cmd.middle, formatStart, formatEnd, separator);\n        var startTail = formatStart(cmd.tail);\n        var endHead = formatEnd(cmd.head);\n        var endMiddle = formatRange(cmd.middle, formatStart, formatEnd, separator);\n        var endTail = formatEnd(cmd.tail);\n        if (startHead === endHead && startTail === endTail) {\n            return startHead +\n                (startMiddle === endMiddle ? startMiddle : startMiddle + separator + endMiddle) +\n                startTail;\n        }\n    }\n    var startWhole = formatStart(cmd.whole);\n    var endWhole = formatEnd(cmd.whole);\n    if (startWhole === endWhole) {\n        return startWhole;\n    }\n    else {\n        return startWhole + separator + endWhole;\n    }\n}\n"],"names":[],"mappings":"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"}