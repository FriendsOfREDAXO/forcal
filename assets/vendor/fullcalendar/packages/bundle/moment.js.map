{"version":3,"file":"moment.js","sources":["../../../tmp/tsc-output/packages/moment/src/main.js"],"sourcesContent":["import * as momentNs from 'moment';\nvar moment = momentNs; // the directly callable function\nimport { Calendar, createPlugin } from '@fullcalendar/core';\nexport function toMoment(date, calendar) {\n    if (!(calendar instanceof Calendar)) {\n        throw new Error('must supply a Calendar instance');\n    }\n    return convertToMoment(date, calendar.dateEnv.timeZone, null, calendar.dateEnv.locale.codes[0]);\n}\nexport function toDuration(fcDuration) {\n    return moment.duration(fcDuration); // moment accepts all the props that fc.Duration already has!\n}\nfunction formatWithCmdStr(cmdStr, arg) {\n    var cmd = parseCmdStr(cmdStr);\n    if (arg.end) {\n        var startMom = convertToMoment(arg.start.array, arg.timeZone, arg.start.timeZoneOffset, arg.localeCodes[0]);\n        var endMom = convertToMoment(arg.end.array, arg.timeZone, arg.end.timeZoneOffset, arg.localeCodes[0]);\n        return formatRange(cmd, createMomentFormatFunc(startMom), createMomentFormatFunc(endMom), arg.separator);\n    }\n    return convertToMoment(arg.date.array, arg.timeZone, arg.date.timeZoneOffset, arg.localeCodes[0]).format(cmd.whole); // TODO: test for this\n}\nexport default createPlugin({\n    cmdFormatter: formatWithCmdStr\n});\nfunction createMomentFormatFunc(mom) {\n    return function (cmdStr) {\n        return cmdStr ? mom.format(cmdStr) : ''; // because calling with blank string results in ISO8601 :(\n    };\n}\nfunction convertToMoment(input, timeZone, timeZoneOffset, locale) {\n    var mom;\n    if (timeZone === 'local') {\n        mom = moment(input);\n    }\n    else if (timeZone === 'UTC') {\n        mom = moment.utc(input);\n    }\n    else if (moment.tz) {\n        mom = moment.tz(input, timeZone);\n    }\n    else {\n        mom = moment.utc(input);\n        if (timeZoneOffset != null) {\n            mom.utcOffset(timeZoneOffset);\n        }\n    }\n    mom.locale(locale);\n    return mom;\n}\nfunction parseCmdStr(cmdStr) {\n    var parts = cmdStr.match(/^(.*?)\\{(.*)\\}(.*)$/); // TODO: lookbehinds for escape characters\n    if (parts) {\n        var middle = parseCmdStr(parts[2]);\n        return {\n            head: parts[1],\n            middle: middle,\n            tail: parts[3],\n            whole: parts[1] + middle.whole + parts[3]\n        };\n    }\n    else {\n        return {\n            head: null,\n            middle: null,\n            tail: null,\n            whole: cmdStr\n        };\n    }\n}\nfunction formatRange(cmd, formatStart, formatEnd, separator) {\n    if (cmd.middle) {\n        var startHead = formatStart(cmd.head);\n        var startMiddle = formatRange(cmd.middle, formatStart, formatEnd, separator);\n        var startTail = formatStart(cmd.tail);\n        var endHead = formatEnd(cmd.head);\n        var endMiddle = formatRange(cmd.middle, formatStart, formatEnd, separator);\n        var endTail = formatEnd(cmd.tail);\n        if (startHead === endHead && startTail === endTail) {\n            return startHead +\n                (startMiddle === endMiddle ? startMiddle : startMiddle + separator + endMiddle) +\n                startTail;\n        }\n    }\n    var startWhole = formatStart(cmd.whole);\n    var endWhole = formatEnd(cmd.whole);\n    if (startWhole === endWhole) {\n        return startWhole;\n    }\n    else {\n        return startWhole + separator + endWhole;\n    }\n}\n"],"names":["Calendar","createPlugin"],"mappings":"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"}